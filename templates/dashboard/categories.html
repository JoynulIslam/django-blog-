{% extends "base.html" %} {% block content %}

<div class="row">
  <!-- Left Sidebar -->

  {% include "dashboard/sidebar.html" %}

  <!-- Right side Content -->
  <div class="col-md-9">
    <div
      class="d-flex flex-wrap align-items-center justify-content-between mb-3"
    >
      <h2 class="mb-2 mb-md-0">All Categories</h2>
      <a href="{% url 'add_category' %}" class="btn btn-dark text-light">
        <i class="fa-solid fa-plus"></i>
        <span>Add New</span>
      </a>
    </div>

    <table class="table table-hover">
      <thead>
        <tr>
          <th>#</th>
          <th>Category Name</th>
          <th>Created At</th>
          <th>Updated At</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        {% for cat in categories %}

        <!-- Delete Confirmation Modal -->
        <div
          class="modal fade"
          id="deleteModal{{ cat.id }}"
          tabindex="-1"
          role="dialog"
          aria-labelledby="deleteModalLabel{{ cat.id }}"
          aria-hidden="true"
        >
          <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="deleteModalLabel{{ cat.id }}">
                  Confirm Delete
                </h5>
                <button type="button" class="close" data-dismiss="modal">
                  <span>&times;</span>
                </button>
              </div>

              <div class="modal-body text-center">
                <p class="mb-1">Are you sure you want to delete</p>
                <h5 class="text-danger font-weight-bold">"{{ cat.name }}"</h5>
              </div>

              <div class="modal-footer d-flex justify-content-between">
                <button
                  type="button"
                  class="btn btn-secondary"
                  data-dismiss="modal"
                >
                  Cancel
                </button>

                <a
                  href="{% url 'delete_category' cat.id %}"
                  class="btn btn-danger"
                >
                  Delete
                </a>
              </div>
            </div>
          </div>
        </div>

        <tr>
          <td>{{forloop.counter}}</td>
          <td>{{cat.name}}</td>
          <td>{{cat.created_at}}</td>
          <td>{{cat.updated_at}}</td>
          <td>
            <a href="{% url 'edit_category' cat.id %}" class="mr-2"
              ><i class="fa-solid fa-pen-to-square text-success"></i
            ></a>
            <!-- <a href="{% url 'delete_category' cat.id %}"
              ><i class="fa-solid fa-trash text-danger"></i
            ></a> -->
            <a
              href="#"
              data-toggle="modal"
              data-target="#deleteModal{{ cat.id }}"
            >
              <i class="fa-solid fa-trash text-danger"></i>
            </a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

{% endblock content %}
