{% extends "base.html" %} {% block content %}

<div class="row">
  <!-- Left Sidebar -->

  {% include "dashboard/sidebar.html" %}

  <!-- Right side Content -->
  <div class="col-md-9">
    <div
      class="d-flex flex-wrap align-items-center justify-content-between mb-3"
    >
      <h2 class="mb-2 mb-md-0">All Posts</h2>
      <a href="{% url 'add_post' %}" class="btn btn-dark text-light">
        <i class="fa-solid fa-plus"></i>
        <span>Add New</span>
      </a>
    </div>

    <table class="table table-hover">
      <thead>
        <tr>
          <th>#</th>
          <th>Title</th>
          <th>Category</th>
          <th>Author</th>
          <th>Status</th>
          <th>Featured</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        {% for post in posts %}

        <!-- Delete Confirmation Modal -->
        <div
          class="modal fade"
          id="deletePostModal{{ post.id }}"
          tabindex="-1"
          role="dialog"
          aria-labelledby="deletePostModalLabel{{ post.id }}"
          aria-hidden="true"
        >
          <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5
                  class="modal-title text-danger"
                  id="deletePostModalLabel{{ post.id }}"
                >
                  Confirm Delete
                </h5>
                <button type="button" class="close" data-dismiss="modal">
                  <span>&times;</span>
                </button>
              </div>

              <div class="modal-body text-center">
                <p class="mb-1">Are you sure you want to delete</p>
                <h5 class="font-weight-bold text-danger">"{{ post.title }}"</h5>
              </div>

              <div class="modal-footer d-flex justify-content-between">
                <button
                  type="button"
                  class="btn btn-secondary"
                  data-dismiss="modal"
                >
                  Cancel
                </button>

                <a
                  href="{% url 'delete_post' post.id %}"
                  class="btn btn-danger"
                >
                  Delete
                </a>
              </div>
            </div>
          </div>
        </div>

        <!-- Table Row -->
        <tr>
          <td>{{ forloop.counter }}</td>
          <td>{{ post.title }}</td>
          <td>{{ post.category }}</td>
          <td>{{ post.author }}</td>
          <td class="text-center">
            {% if post.status == "Published" %}
            <span class="badge badge-success">Published</span>
            {% else %}
            <span class="badge badge-warning">Draft</span>
            {% endif %}
          </td>

          <td class="text-center">
            {% if post.is_featured %}
            <i class="fa-solid fa-check text-success" title="Featured Post"></i>
            {% else %}
            <i class="fa-solid fa-xmark text-danger" title="Not Featured"></i>
            {% endif %}
          </td>

          <td>
            <a href="{% url 'edit_post' post.id %}" class="mr-2">
              <i class="fa-solid fa-pen-to-square text-success"></i>
            </a>

            <a
              href="#"
              data-toggle="modal"
              data-target="#deletePostModal{{ post.id }}"
            >
              <i class="fa-solid fa-trash text-danger"></i>
            </a>
          </td>
        </tr>

        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

{% endblock content %}
